---
interface Props {
  course: string;
  courseNumber: string;
  institution: string;
  department: string;
  level: 'undergraduate' | 'graduate';
  enrollment: string;
  description: string;
  highlights?: string[];
  current: boolean;
  yearsStart: number;
  yearsEnd?: number;
}

const {
  course,
  courseNumber,
  institution,
  department,
  level,
  enrollment,
  description,
  highlights,
  current,
  yearsStart,
  yearsEnd,
} = Astro.props;

const levelLabel = level === 'graduate' ? 'Graduate' : 'Undergraduate';
const yearsLabel = current
  ? `${yearsStart} - Present`
  : yearsEnd
    ? `${yearsStart} - ${yearsEnd}`
    : `${yearsStart}`;

// Logo mapping based on institution name
const logoMap: Record<string, { src: string; alt: string }> = {
  "Princeton University": { src: "/logos/princeton-logo.svg", alt: "Princeton University" },
  "Rutgers University": { src: "/logos/rutgers-logo.svg", alt: "Rutgers University" },
};

const logo = logoMap[institution];
---

<div class="p-6 border rounded-lg hover:border-primary/50 transition-colors">
  <div class="flex flex-wrap items-start justify-between gap-2 mb-3">
    <span
      class:list={[
        'text-xs px-2.5 py-1 rounded-full font-medium',
        level === 'graduate'
          ? 'bg-purple-100 text-purple-700'
          : 'bg-blue-100 text-blue-700',
      ]}
    >
      {levelLabel}
    </span>
    <span class="text-sm text-muted-foreground">{yearsLabel}</span>
  </div>

  <h3 class="text-lg font-medium mb-1">{course}</h3>
  <p class="text-sm text-muted-foreground mb-1">{courseNumber}</p>
  <p class="text-sm text-primary/80 mb-3">{institution} &middot; {department}</p>

  <p class="text-sm text-muted-foreground mb-4 leading-relaxed">{description}</p>

  {highlights && highlights.length > 0 && (
    <ul class="text-sm text-muted-foreground space-y-1.5 mb-4">
      {highlights.map((h) => (
        <li class="flex items-start gap-2">
          <span class="w-1.5 h-1.5 rounded-full bg-primary mt-1.5 shrink-0" />
          <span>{h}</span>
        </li>
      ))}
    </ul>
  )}

  <div class="flex items-end justify-between mt-4">
    <p class="text-xs text-muted-foreground">
      Typical enrollment: {enrollment} students
    </p>
    {logo && (
      <img
        src={logo.src}
        alt={logo.alt}
        class="w-8 h-8 opacity-50 hover:opacity-80 transition-opacity"
        loading="lazy"
      />
    )}
  </div>
</div>
