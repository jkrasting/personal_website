---
import PageLayout from '../layouts/PageLayout.astro';
import TeachingMetrics from '../components/teaching/TeachingMetrics.astro';
import CourseCard from '../components/teaching/CourseCard.astro';
import cvData from '../data/cv-data.json';

const pageTitle = "Teaching | Dr. John P. Krasting";
const pageDescription = "University teaching in atmospheric science and climate dynamics at Princeton University and Rutgers University.";

const { teaching, teachingMetrics, teachingPhilosophy, teachingEvidence } = cvData;
const currentCourses = teaching.filter((c: any) => c.current);
const pastCourses = teaching.filter((c: any) => !c.current);
---

<PageLayout title={pageTitle} description={pageDescription}>
  <div class="max-w-4xl mx-auto">
    <!-- Page Header -->
    <div class="text-center mb-12">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-medium tracking-tighter mb-4">
        Teaching
      </h1>
      <p class="text-muted-foreground text-lg mb-6">
        University instruction in atmospheric science and climate dynamics
      </p>
      <a
        href="/teaching_portfolio.pdf"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-6 py-3 bg-primary text-background rounded-full font-medium hover:opacity-90 transition-opacity"
      >
        Download Teaching Portfolio
        <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5523 3.44772 13 4 13H11C11.5523 13 12 12.5523 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1046 12.1046 14 11 14H4C2.89543 14 2 13.1046 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path>
        </svg>
      </a>
    </div>

    <!-- Teaching Metrics -->
    <TeachingMetrics {...teachingMetrics} />

    <!-- Teaching Philosophy -->
    <section class="mb-12">
      <h2 class="text-2xl font-medium mb-4">Teaching Philosophy</h2>
      <p class="text-muted-foreground mb-8 leading-relaxed">
        {teachingPhilosophy.overview}
      </p>

      <div class="grid gap-6 md:grid-cols-2">
        {teachingPhilosophy.keyPrinciples.map((principle: any) => (
          <div class="p-5 border rounded-lg">
            <h3 class="font-medium mb-2">{principle.title}</h3>
            <p class="text-sm text-muted-foreground leading-relaxed">
              {principle.description}
            </p>
          </div>
        ))}
      </div>
    </section>

    <!-- Current Courses -->
    <section class="mb-12">
      <h2 class="text-2xl font-medium mb-6 pb-2 border-b">Current Courses</h2>
      <div class="grid gap-6">
        {currentCourses.map((course: any) => (
          <CourseCard {...course} />
        ))}
      </div>
    </section>

    <!-- Past Teaching -->
    {pastCourses.length > 0 && (
      <section class="mb-12">
        <h2 class="text-2xl font-medium mb-6 pb-2 border-b">Past Teaching</h2>
        <div class="grid gap-6 md:grid-cols-2">
          {pastCourses.map((course: any) => (
            <CourseCard {...course} />
          ))}
        </div>
      </section>
    )}

    <!-- Evidence of Effective Teaching -->
    <section class="p-6 bg-card rounded-lg border">
      <h2 class="text-lg font-medium mb-3">Evidence of Effective Teaching</h2>
      <p class="text-sm text-muted-foreground mb-4">
        {teachingEvidence.summary}
      </p>
      <p class="text-sm text-muted-foreground mb-4">
        Four themes consistently emerge from peer observations and student evaluations:
      </p>
      <ul class="space-y-3">
        {teachingEvidence.themes.map((theme: any) => (
          <li class="flex items-start gap-3 text-sm">
            <span class="w-2 h-2 rounded-full bg-primary mt-1.5 shrink-0" />
            <span>
              <strong class="text-foreground">{theme.title}</strong>
              <span class="text-muted-foreground"> â€” {theme.description}</span>
            </span>
          </li>
        ))}
      </ul>
    </section>
  </div>
</PageLayout>
