---
import PageLayout from '../layouts/PageLayout.astro';
import TeachingMetrics from '../components/teaching/TeachingMetrics.astro';
import CourseCard from '../components/teaching/CourseCard.astro';
import cvData from '../data/cv-data.json';

const pageTitle = "Teaching | Dr. John P. Krasting";
const pageDescription = "University teaching in atmospheric science and climate dynamics at Princeton University and Rutgers University.";

const { teaching, teachingMetrics, teachingPhilosophy, teachingEvidence, extensionOutreach } = cvData;
const currentCourses = teaching.filter((c: any) => c.current);
const pastCourses = teaching.filter((c: any) => !c.current);
---

<PageLayout title={pageTitle} description={pageDescription}>
  <div class="max-w-4xl mx-auto">
    <!-- Page Header -->
    <div class="text-center mb-12">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-medium tracking-tighter mb-4">
        Teaching
      </h1>
      <p class="text-muted-foreground text-lg mb-6">
        University instruction in atmospheric science and climate dynamics
      </p>
    </div>

    <!-- Teaching Metrics -->
    <TeachingMetrics {...teachingMetrics} />

    <!-- Teaching Philosophy -->
    <section class="mb-12">
      <h2 class="text-2xl font-medium mb-4">Teaching Philosophy</h2>
      <p class="text-muted-foreground mb-8 leading-relaxed">
        {teachingPhilosophy.overview}
      </p>

      <div class="grid gap-6 md:grid-cols-2">
        {teachingPhilosophy.keyPrinciples.map((principle: any) => (
          <div class="p-5 border rounded-lg">
            <h3 class="font-medium mb-2">{principle.title}</h3>
            <p class="text-sm text-muted-foreground leading-relaxed">
              {principle.description}
            </p>
          </div>
        ))}
      </div>
    </section>

    <!-- Science Communication & Public Outreach -->
    <section class="mb-12">
      <h2 class="text-2xl font-medium mb-4">{extensionOutreach.title}</h2>
      <div class="flex flex-col md:flex-row gap-6">
        <div class="md:w-1/2">
          <p class="text-muted-foreground mb-4 leading-relaxed">
            {extensionOutreach.overview}
          </p>
          <ul class="space-y-2">
            {extensionOutreach.activities.map((activity: string) => (
              <li class="flex items-start gap-2 text-sm text-muted-foreground">
                <span class="w-1.5 h-1.5 rounded-full bg-primary mt-1.5 shrink-0" />
                <span>{activity}</span>
              </li>
            ))}
          </ul>
        </div>
        <div class="md:w-1/2">
          <figure class="rounded-lg overflow-hidden border">
            <img
              src={extensionOutreach.featuredImage.src}
              alt={extensionOutreach.featuredImage.alt}
              class="w-full h-auto object-cover"
              loading="lazy"
            />
            <figcaption class="p-3 text-sm text-muted-foreground bg-muted/30 text-center italic">
              {extensionOutreach.featuredImage.caption}
            </figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- Current Courses -->
    <section class="mb-12">
      <h2 class="text-2xl font-medium mb-6 pb-2 border-b">Current Courses</h2>
      <div class="grid gap-6">
        {currentCourses.map((course: any) => (
          <CourseCard {...course} />
        ))}
      </div>
    </section>

    <!-- Past Teaching -->
    {pastCourses.length > 0 && (
      <section class="mb-12">
        <h2 class="text-2xl font-medium mb-6 pb-2 border-b">Past Teaching</h2>
        <div class="grid gap-6 md:grid-cols-2">
          {pastCourses.map((course: any) => (
            <CourseCard {...course} />
          ))}
        </div>
      </section>
    )}

    <!-- Evidence of Effective Teaching -->
    <section class="p-6 bg-card rounded-lg border">
      <h2 class="text-lg font-medium mb-3">Evidence of Effective Teaching</h2>
      <p class="text-sm text-muted-foreground mb-4">
        {teachingEvidence.summary}
      </p>
      <p class="text-sm text-muted-foreground mb-4">
        Four themes consistently emerge from peer observations and student evaluations:
      </p>
      <ul class="space-y-3">
        {teachingEvidence.themes.map((theme: any) => (
          <li class="flex items-start gap-3 text-sm">
            <span class="w-2 h-2 rounded-full bg-primary mt-1.5 shrink-0" />
            <span>
              <strong class="text-foreground">{theme.title}</strong>
              <span class="text-muted-foreground"> — {theme.description}</span>
            </span>
          </li>
        ))}
      </ul>
      {teachingEvidence.studentTestimonials && (
        <div class="mt-6 pt-6 border-t border-border/50">
          <h3 class="text-sm font-medium mb-4 text-muted-foreground">What Students Say</h3>
          <div class="grid gap-4 md:grid-cols-2">
            {teachingEvidence.studentTestimonials.map((t: any) => (
              <blockquote class="p-4 bg-muted/30 rounded-lg border-l-2 border-primary/50">
                <p class="text-sm text-muted-foreground italic leading-relaxed">
                  "{t.quote}"
                </p>
                <footer class="mt-2 text-xs text-muted-foreground/70">
                  — Anonymous Student, {t.semester}
                </footer>
              </blockquote>
            ))}
          </div>
        </div>
      )}
    </section>
  </div>
</PageLayout>
